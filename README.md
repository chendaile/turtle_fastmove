# Turtle AI Controller

基于ROS2的智能海龟控制系统，通过神经网络参数优化实现自适应路径跟踪。

## 快速开始

```bash
./start.sh
```

运行脚本后根据提示选择路线和参数配置即可开始训练。

## 项目简介

本项目实现了一个智能海龟控制系统，海龟沿预设路线行走的过程中：
- 神经网络实时学习控制参数与圈速的映射关系
- 系统自动优化转向速度、角度阈值等控制参数
- 每完成一圈后更新最佳参数，持续提升行走效率

## 核心特性

- **10种预设路线**：从简单方形到复杂迷宫，适应不同训练需求
- **实时参数优化**：基于神经网络预测的智能参数调整
- **最佳记录保存**：自动保存历史最优参数，支持继续训练
- **可视化反馈**：实时显示圈速、参数变化和训练进度

## 系统架构

### 控制参数（10个）
- 角度阈值、转向速度、速度衰减因子
- 微调增益、距离系数、减速参数等

### 神经网络（4层）
- 输入：9个控制参数
- 隐藏层：16→12→8 全连接层
- 输出：预测完成一圈所需时间

### 优化策略
1. 收集参数-圈速数据对
2. 训练神经网络建立映射关系
3. 生成候选参数并预测性能
4. 选择最优参数更新控制器

## 可用路线

| 路线名称 | 描述 | 难度 |
|---------|------|-----|
| simple | 基础方形路线 | ⭐ |
| spiral | 螺旋形路线 | ⭐⭐ |
| star | 五角星路线 | ⭐⭐⭐ |
| maze | 迷宫路线 | ⭐⭐⭐⭐ |

完整路线列表：simple, figure_eight, spiral, star, complex_polygon, s_curve, maze, diamond, triangle, zigzag

## 命令行使用

```bash
# 指定路线和参数
python3 src/turtle_ai_controller.py --route spiral --contin

# 参数说明
--route, -r    选择路线（默认：simple）
--contin, -u   从历史最佳参数开始（默认：false）
```

## 文件结构

```
├── src/turtle_ai_controller.py   # 主控制程序
├── config/
│   ├── init_arg.json            # 初始参数配置
│   └── routes.json              # 路线定义
├── output/                      # 最佳参数保存目录
├── start.sh                     # 启动脚本
└── README.md
```

## 运行要求

- ROS2 (Humble或更新版本)
- Python 3.8+
- NumPy

系统会自动启动1800x1600像素的turtlesim窗口，确保有足够的显示空间。